---
title: "ARIMAX"
author: "tomchaffey"
date: "`r Sys.Date()`"
output: html_document
---
# Utilisinf ARIMAX modelling

### Loading packages
```{r, include=FALSE}
library(tidyverse)
library(lubridate)
library(forecast)
library(xts)
library(dplyr)
library(ggplot2)
library(dygraphs)
```

### Arimax start
We're going to pilot test ARIMAX here, or multifactorial ARIMA. We've already put together some time series for both phytoplankton abundance and river murray discharge. And, attempted ARIMA on phyto abundance to some success. Will have to combine both sets into one df, then go from there. 

We're going to pilot test on Lock 9 with Anabaena. Has a long series of data for both discharge and phyto abundance. 

```{r}
head(anabaena_lock9)
head(LOCK_9)
```

```{r}
anabaena_arimax <- anabaena_lock9 %>%
  select(CELLCOUNT, Date_Sampled)

lock9_arimax <- LOCK_9 %>%
  select(`#Timestamp`, Value)


```

Lock 9 discharge dates all the way back to 1967, we will have to cut down to 1997 (start of Anabaena at lock 9). Importantly, discharge data is taken daily, we should be easily able to cut down to one reading per week, and have two data frames with the same length. 

```{r}
lock9_arimax$`#Timestamp` <-  as.Date(lock9_arimax$`#Timestamp`, tz = "")

str(lock9_arimax)
```

```{r}
lock9_arimax1 <- lock9_arimax %>%
  filter(`#Timestamp` >="1997-11-25") %>%
  filter(`#Timestamp` <="2018-2-20")


lock9_arimax1$`#Timestamp` %>%
  max()

lock9_arimax1$`#Timestamp` %>%
  min()
```

We now have a df for discharge which extend from both the start of our anabaena set to the end of our anabaena set (1997 - 2018). However, our anabaena set includes cellcounts for all reported taxa within the classificiation Anabaena, which range from genus to species, so we often see multiple cell counts on the same day, not sure if this is a problem yet, if necessary, I can only take unique dates from Anabaena to have to df of the same length. 

```{r}

```

